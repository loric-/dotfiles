#  __  ____     ___  __   __ _  ____  __  ___ 
# (  )( __ \   / __)/  \ (  ( \(  __)(  )/ __)
#  )(  (__ (  ( (__(  O )/    / ) _)  )(( (_ \
# (__)(____/   \___)\__/ \_)__)(__)  (__)\___/
#

# I have used a look alexbooker's configuration 
# files and youtube videos
# See: https://www.reddit.com/r/unixporn/comments/3ow56l/i3_clean_and_minimal_i3_desktop_inspired_by_os_x/ 

#
# DEPENDENCIES
#-----------------------------------

# * i3-gaps
# * i3status
# * nm-applet
# * compton
# * lxappearance
# * nitrogen
# * xflux
# * clipit
# * arandr
# * rofi
# * dunst
# * amixer
# * i3lock
# * xclip
# * cerebro
# * playerctl
# * gsimplecal

#
# SPECIAL KEY NAMES
#-----------------------------------

# shift     Shift_L, Shift_R
# lock      Caps_Lock
# control   Control_L, Control_R
# mod1      Alt_L, Meta_L
# mod2      Num_Lock
# mod3      
# mod4      Super_L, Super_R, Super_L, Hyper_L
# mod5      ISO_Level3_Shift, Mode_switch

#
# USEFUL COMMANDS
#-----------------------------------

# Find key information: xev
# Find program information: xprop

#
# COLORS
#-----------------------------------

# Special
set_from_resource $foreground foreground  #000000
set_from_resource $background background  #000000
# Black
set_from_resource $color0     color0      #000000
set_from_resource $color8     color8      #000000
# Red
set_from_resource $color1     color1      #000000
set_from_resource $color9     color9      #000000
# Green
set_from_resource $color2     color2      #000000
set_from_resource $color10    color10     #000000
# Yellow
set_from_resource $color3     color3      #000000
set_from_resource $color11    color11     #000000
# Blue
set_from_resource $color4     color4      #000000
set_from_resource $color12    color12     #000000
# Magenta
set_from_resource $color5     color5      #000000
set_from_resource $color13    color13     #000000
# Cyan
set_from_resource $color6     color6      #000000
set_from_resource $color14    color14     #000000
# White
set_from_resource $color7     color7      #000000
set_from_resource $color15    color15     #000000

#
# VARIABLES
#-----------------------------------

# Variable modifier
set $mod mod4

# Variable font
set $font Droid Sans 9

# Variables softwares
set $terminal urxvt
set $browser google-chrome
set $filemanager pantheon-files
set $mail thunderbird
set $screenshot shutter
set $editor code
set $ide pstorm
set $music spotify
set $skype skypeforlinux

#
# WORKSPACES
#-----------------------------------

# Customize workspace names
# Home
set $workspace1 "1:"
# Dev
set $workspace2 "2:"
# Mail
set $workspace3 "3:"
# Chat
set $workspace4 "4:"
# Others
set $workspace5 "5:"
# Music
set $workspace6 "6:"
# Workspace 7
set $workspace7 "7:4"
# Workspace 8
set $workspace8 "8:3"
# Workspace 9
set $workspace9 "9:2"
# Workspace 10
set $workspace10 "10:1"

# Rules to start windows in workspaces
assign [class="(?i)$music"] $workspace6
assign [class="(?i)$mail"] $workspace3
assign [class="(?i)$skype"] $workspace4
assign [class="(?i)$ide"] $workspace2

# Rules for windows
for_window [class="(?i)gsimplecal"] floating enable, move position mouse

# Default layout new workspace "default|stacking|tabbed"
workspace_layout default

# Allow alt-tab style when hit twice a desktop number
workspace_auto_back_and_forth no

# Rename workspace
bindsym $mod+equal exec i3-input -F 'rename workspace to "%s"' -P 'New name: '

# switch to workspace
bindsym $mod+7 workspace $workspace1
bindsym $mod+8 workspace $workspace2
bindsym $mod+9 workspace $workspace3
bindsym $mod+0 workspace $workspace4
bindsym $mod+6 workspace $workspace5
bindsym $mod+5 workspace $workspace6
bindsym $mod+4 workspace $workspace7
bindsym $mod+3 workspace $workspace8
bindsym $mod+2 workspace $workspace9
bindsym $mod+1 workspace $workspace10

# switching between workspace
bindsym $mod+p workspace prev_on_output
bindsym $mod+n workspace next_on_output
bindsym $mod+Shift+Tab workspace prev_on_output
bindsym $mod+Tab workspace next_on_output

# move focused container to workspace
bindsym $mod+Shift+7 move container to workspace $workspace1
bindsym $mod+Shift+8 move container to workspace $workspace2
bindsym $mod+Shift+9 move container to workspace $workspace3
bindsym $mod+Shift+0 move container to workspace $workspace4
bindsym $mod+Shift+6 move container to workspace $workspace5
bindsym $mod+Shift+5 move container to workspace $workspace6
bindsym $mod+Shift+4 move container to workspace $workspace7
bindsym $mod+Shift+3 move container to workspace $workspace8
bindsym $mod+Shift+2 move container to workspace $workspace9
bindsym $mod+Shift+1 move container to workspace $workspace10

# move focused container to next/previous workspace
bindsym $mod+Shift+n move container to workspace next
bindsym $mod+Shift+p move container to workspace prev

# move current workspace to next/previous output
bindsym $mod+control+c move workspace to output left
bindsym $mod+control+t move workspace to output down
bindsym $mod+control+s move workspace to output up
bindsym $mod+control+r move workspace to output right

#
# AUTOSTART
#-----------------------------------

# Set bépo keyboard
exec --no-startup-id setxkbmap fr -variant bepo

# Remove screensaver
exec --no-startup-id xset -dpms
exec --no-startup-id xset s off

# Change mouse speed
exec --no-startup-id xset m 5 1

# Launch Wifi applet
exec --no-startup-id nm-applet

# Custom programs
exec --no-startup-id cerebro
exec --no-startup-id nitrogen --restore
exec --no-startup-id xflux -l 46.251508
exec --no-startup-id clipit
exec --no-startup-id dunst

# Compton
exec --no-startup-id compton -b

#
# COLORS
#-----------------------------------

# Disable titlebar and set border
for_window [class="^.*"] border pixel 3

# Property Name         Border        BG            Text          Indicator  Child Border
client.focused          $color5       $color5       $foreground   $color15   $color5
client.focused_inactive $background   $background   $foreground   $color15   $background
client.unfocused        $background   $background   $foreground   $color15   $background
client.urgent           $color13      $color13      $foreground   $color15   $color13
client.placeholder      $background   $background   $foreground   $color15   $background
client.background       $background

#
# i3 BAR
#-----------------------------------

# Start i3bar to display a workspace bar
bar {
	status_command i3status -c $HOME/.config/i3/i3status.conf
	mode dock
	position top
  height 25
	font pango:$font, FontAwesome 9
	#tray_output primary
	# Show only name and not number
	strip_workspace_numbers yes
	workspace_buttons yes
	# Show the mode (resize for instance)
	binding_mode_indicator yes

  colors {
        background $color0
        statusline $foreground
        separator  $background

        # State             Border        BG            Text
        focused_workspace   $color5       $color5       $foreground
        active_workspace    $color0       $color0       $foreground
        inactive_workspace  $color0       $color0       $foreground
        urgent_workspace    $color13      $color13      $foreground
        binding_mode        $color13      $color13      $foreground
    }
}

#
# BORDERS
#-----------------------------------

hide_edge_borders smart

#
# OTHER
#-----------------------------------

# Font for windows tiles
font pango:$font

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Gaps
set $default_gaps 10
gaps inner $default_gaps
smart_gaps on

# RESIZE
#-----------------------------------
mode "power" {
    bindsym l mode "default", exec --no-startup-id $HOME/.config/i3/i3exit lock
    bindsym e mode "default", exec --no-startup-id $HOME/.config/i3/i3exit logout
    bindsym s mode "default", exec --no-startup-id $HOME/.config/i3/i3exit suspend
    bindsym h mode "default", exec --no-startup-id $HOME/.config/i3/i3exit hibernate
    bindsym r mode "default", exec --no-startup-id $HOME/.config/i3/i3exit reboot
    bindsym p mode "default", exec --no-startup-id $HOME/.config/i3/i3exit shutdown

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+mod1+l mode "power"

mode "reload" {
    bindsym c mode "default", reload
    bindsym r mode "default", restart
}
bindsym $mod+mod1+s mode "reload"

mode "gaps" {
    bindsym plus  gaps inner current plus 5
    bindsym minus gaps inner current minus 5
    bindsym 0     gaps inner current set 0
    bindsym d     gaps inner current set $default_gaps

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+mod1+g mode "gaps"

mode "apps" {
    bindsym Return mode "default", exec $HOME/.config/i3/runorraise.sh $terminal
    bindsym f mode "default", exec $HOME/.config/i3/runorraise.sh $filemanager
    bindsym c mode "default", exec $HOME/.config/i3/runorraise.sh $browser
    bindsym m mode "default", exec $HOME/.config/i3/runorraise.sh $music
    bindsym i mode "default", exec $HOME/.config/i3/runorraise.sh $ide
    bindsym e mode "default", exec $HOME/.config/i3/runorraise.sh $editor
    bindsym s mode "default", exec $HOME/.config/i3/runorraise.sh $skype
    bindsym d mode "default", exec gsimplecal
    bindsym r mode "default", exec i3-input -F "exec $HOME/.config/i3/runorraise.sh %s" -P "Run or raise: "

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+mod1+t mode "apps"

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        bindsym c           resize grow width 5 px or 5 ppt
        bindsym t           resize grow height 5 px or 5 ppt
        bindsym s           resize shrink height 5 px or 5 ppt
        bindsym r           resize shrink width 5 px or 5 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mod+mod1+r mode "resize"

# Sound shortcuts
bindsym XF86AudioRaiseVolume exec amixer -D pulse sset Master 5%+ unmute
bindsym XF86AudioLowerVolume exec amixer -D pulse sset Master 5%- unmute
bindsym XF86AudioMute exec amixer -D pulse sset Master toggle

# Media player controls
bindsym XF86AudioPlay exec playerctl play
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# Brightness
bindsym XF86MonBrightnessUp exec $HOME/.config/i3/brightness.sh +20
bindsym XF86MonBrightnessDown exec $HOME/.config/i3/brightness.sh -20

#
# BINDINGS
#-----------------------------------
# Fix windows glitches
new_window none

# Start a terminal
bindsym $mod+Return exec $terminal

# Utilities
bindsym Print exec --no-startup-id $screenshot

# Tags
bindsym $mod+semicolon exec i3-input -F "mark %s" -P "New tag: "
bindsym $mod+colon exec i3-input -F "[con_mark=\"%s\"] focus" -P "Search tag: "
bindsym $mod+exclam exec i3-input -F "unmark %s" -P "Remove tag: "

# Scratchpad
# Make the currently focused window a scratchpad
bindsym $mod+Shift+dollar move scratchpad

# Show the first scratchpad window
bindsym $mod+dollar scratchpad show

# kill focused window
bindsym $mod+q kill
bindsym --release button2 kill
bindsym --whole-window $mod+button2 kill

# change focus
bindsym $mod+c focus left
bindsym $mod+t focus down
bindsym $mod+s focus up
bindsym $mod+r focus right

# move focused window
bindsym $mod+Shift+c move left
bindsym $mod+Shift+t move down
bindsym $mod+Shift+s move up
bindsym $mod+Shift+r move right

# focus between visible windows
bindsym mod1+Tab exec --no-startup-id ~/.config/i3/i3t.py n
bindsym mod1+Shift+Tab exec --no-startup-id ~/.config/i3/i3t.py p

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+Shift+f fullscreen

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+k layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle between stacking/tabbed/split:
bindsym $mod+x layout toggle

# toggle tiling / floating
bindsym $mod+f floating toggle

# focus the parent/child container
bindsym $mod+a focus parent
bindsym $mod+z focus child

# Rofi
#bindsym $mod+space exec --no-startup-id rofi -show run
