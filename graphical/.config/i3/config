#  __  ____     ___  __   __ _  ____  __  ___ 
# (  )( __ \   / __)/  \ (  ( \(  __)(  )/ __)
#  )(  (__ (  ( (__(  O )/    / ) _)  )(( (_ \
# (__)(____/   \___)\__/ \_)__)(__)  (__)\___/
#

#
# DEPENDENCIES
#-----------------------------------

# * i3-gaps
# * i3status
# * nm-applet
# * gnome-sound-applet
# * compton
# * lxappearance
# * nitrogen
# * xflux
# * clipit
# * scrot
# * arandr
# * rofi
# * dunst
# * amixer
# * i3lock

#
# SPECIAL KEY NAMES
#-----------------------------------

# shift     Shift_L, Shift_R
# lock      Caps_Lock
# control   Control_L, Control_R
# mod1      Alt_L, Meta_L
# mod2      Num_Lock
# mod3      
# mod4      Super_L, Super_R, Super_L, Hyper_L
# mod5      ISO_Level3_Shift, Mode_switch

#
# USEFUL COMMANDS
#-----------------------------------

# Find key information: xev
# Find program information: xprop

#
# VARIABLES
#-----------------------------------

# Variable modifier
set $mod mod4

# Variable font
set $font Droid Sans 9

# Variables softwares
set $terminal urxvt
set $browser google-chrome-stable
set $filemanager pantheon-files

#
# WORKSPACES
#-----------------------------------

# Customize workspace names
# Home
set $workspace1 "1 "
# Mail
set $workspace2 "2 "
# Dev
set $workspace3 "3 "
# Chat
set $workspace4 "4 "
# Music
set $workspace5 "5 "
# Others
set $workspace6 "6 "
set $workspace7 "7"
set $workspace8 "8"
set $workspace9 "9"
set $workspace10 "10"

# Default layout new workspace "default|stacking|tabbed"
workspace_layout default

# Allow alt-tab style when hit twice a desktop number
workspace_auto_back_and_forth yes

# Rename workspace
bindsym $mod+equal exec i3-input -F 'rename workspace to "%s"' -P 'New name: '

# switch to workspace3
bindsym $mod+1 workspace $workspace1
bindsym $mod+2 workspace $workspace2
bindsym $mod+3 workspace $workspace3
bindsym $mod+4 workspace $workspace4
bindsym $mod+5 workspace $workspace5
bindsym $mod+6 workspace $workspace6
bindsym $mod+7 workspace $workspace7
bindsym $mod+8 workspace $workspace8
bindsym $mod+9 workspace $workspace9
bindsym $mod+0 workspace $workspace10

# switching between workspace
bindsym $mod+p workspace prev
bindsym $mod+n workspace next
bindsym mod1+Shift+Tab workspace prev_on_output
bindsym mod1+Tab workspace next_on_output

# Switch back and forth
bindsym $mod+Tab workspace back_and_forth

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $workspace1
bindsym $mod+Shift+2 move container to workspace $workspace2
bindsym $mod+Shift+3 move container to workspace $workspace3
bindsym $mod+Shift+4 move container to workspace $workspace4
bindsym $mod+Shift+5 move container to workspace $workspace5
bindsym $mod+Shift+6 move container to workspace $workspace6
bindsym $mod+Shift+7 move container to workspace $workspace7
bindsym $mod+Shift+8 move container to workspace $workspace8
bindsym $mod+Shift+9 move container to workspace $workspace9
bindsym $mod+Shift+0 move container to workspace $workspace10

# move focused container to next/previous workspace
bindsym $mod+Shift+n move container to workspace next
bindsym $mod+Shift+p move container to workspace prev

# Rules to start windows in workspaces
assign [class="Spotify"] $workspace5
assign [class="Thunderbird"] $workspace2
assign [class="skypeforlinux"] $workspace4
assign [class="Pidgin"] $workspace4
assign [class="Slack"] $workspace4
assign [class="Sublime_text"] $workspace3

#
# AUTOSTART
#-----------------------------------

# Set bépo keyboard
exec --no-startup-id setxkbmap fr -variant bepo

# Remove screensaver
exec --no-startup-id xset -dpms
exec --no-startup-id xset s off

# Change mouse speed
exec --no-startup-id xset m 5 1

# Launch Wifi applet
exec --no-startup-id nm-applet

# Launch sound applet
exec --no-startup-id gnome-sound-applet

# Custom programs
exec --no-startup-id nitrogen --restore
exec --no-startup-id xflux -l 46.251508
#exec --no-startup-id numlockx
exec --no-startup-id clipit
exec --no-startup-id dunst

# Compton
exec --no-startup-id compton -f


#
# COLORS
#-----------------------------------

set $bg-color 	         #2f343f
set $inactive-bg-color   #2f343f
set $text-color          #f3f4f5
set $inactive-text-color #676E7D
set $urgent-bg-color     #E53935

# window colors
#                       border              background         text                 indicator
client.focused          $bg-color           $bg-color          $text-color          #00ff00
client.unfocused        $inactive-bg-color  $inactive-bg-color $inactive-text-color #00ff00
client.focused_inactive $inactive-bg-color  $inactive-bg-color $inactive-text-color #00ff00
client.urgent           $urgent-bg-color    $urgent-bg-color   $text-color          #00ff00


#
# i3 BAR
#-----------------------------------

# Start i3bar to display a workspace bar
bar {
	status_command i3status -c $HOME/.config/i3/i3status.conf
	mode dock
	position top
	font pango:$font, FontAwesome 9
	#tray_output primary
	# Show only name and not number
	#strip_workspace_numbers yes
	workspace_buttons yes
	# Show the mode (resize for instance)
	binding_mode_indicator yes

	colors {
		background $bg-color
	  separator #757575

		#                  border             background         text
		focused_workspace  $bg-color          $bg-color          $text-color
		inactive_workspace $inactive-bg-color $inactive-bg-color $inactive-text-color
		urgent_workspace   $urgent-bg-color   $urgent-bg-color   $text-color
	}
}

#
# BORDERS
#-----------------------------------

hide_edge_borders both

#
# OTHER
#-----------------------------------

# Font for windows tiles
font pango:$font

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Gaps
gaps inner 15


#
# RESIZE
#-----------------------------------

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        bindsym c           resize grow width 5 px or 5 ppt
        bindsym t           resize grow height 5 px or 5 ppt
        bindsym s           resize shrink height 5 px or 5 ppt
        bindsym r           resize shrink width 5 px or 5 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# Toggle resize mode
bindsym $mod+g mode "resize"

# Sound shortcuts
bindsym XF86AudioRaiseVolume exec amixer -q set Master 2dB+ unmute
bindsym XF86AudioLowerVolume exec amixer -q set Master 2dB- unmute
bindsym XF86AudioMute exec amixer -q set Master toggle

#
# BINDINGS
#-----------------------------------

# Start a terminal
bindsym $mod+Return exec $terminal

# Start programs
bindsym $mod+u --no-startup-id $filemanager
bindsym $mod+i exec --no-startup-id $browser
bindsym $mod+F12 exec --no-startup-id subl3 $HOME/.config/i3/config
bindsym $mod+F9 exec --no-startup-id scrot -q 100 "$HOME/Pictures/Scrot_%Y-%m-%d_%H:%M:%S.png"; exec notify-send --icon=gtk-info Info "Screenshot saved" -t 300

# Tags
bindsym $mod+semicolon exec i3-input -F "mark %s" -P "New tag: "
bindsym $mod+colon exec i3-input -F "[con_mark=\"%s\"] focus" -P "Search tag: "
bindsym $mod+exclam exec i3-input -F "unmark %s" -P "Remove tag: "

# Scratchpad
# Make the currently focused window a scratchpad
bindsym $mod+Shift+dollar move scratchpad

# Show the first scratchpad window
bindsym $mod+dollar scratchpad show

# kill focused window
bindsym $mod+q kill

# change focus
bindsym $mod+c focus left
bindsym $mod+t focus down
bindsym $mod+s focus up
bindsym $mod+r focus right

# move focused window
bindsym $mod+Shift+c move left
bindsym $mod+Shift+t move down
bindsym $mod+Shift+s move up
bindsym $mod+Shift+r move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+Shift+space fullscreen

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+k layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle between stacking/tabbed/split:
bindsym $mod+x layout toggle

# toggle tiling / floating
bindsym $mod+f floating toggle

# change focus between tiling / floating windows
bindsym $mod+Shift+f focus mode_toggle

# focus the parent/child container
bindsym $mod+a focus parent
bindsym $mod+z focus child

# reload the configuration file
bindsym $mod+control+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+control+r restart

# exit i3 (logs you out of your X session)
bindsym $mod+control+e exec --no-startup-id "i3-nagbar -t warning -m 'Exit session?' -b 'Yes' 'i3-msg exit'"

# Lock screen
bindsym $mod+l exec i3lock --color 475263

# Turn screen off
bindsym $mod+F5 exec --no-startup-id sleep 1 && xset dpms force off

# Power off
bindsym $mod+control+Delete exec --no-startup-id "i3-nagbar -t warning -m 'Power Off?' -b 'Yes' 'sudo poweroff'"

# Rofi
bindsym $mod+space exec --no-startup-id rofi -show run -lines 3 -eh 2 -opacity "85" -bw 0 -bc "$bg-color" -bg "$bg-color" -fg "$text-color" -hlbg "$bg-color" -hlfg "#9575cd" -font "$font"
